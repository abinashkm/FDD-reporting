<div class="dashboard-container">

  <div *ngIf="isLoading" class="loading-wrapper">
    <mat-spinner diameter="60"></mat-spinner>
    <p>Loading analytics...</p>
  </div>

  <div *ngIf="!isLoading">

    <h2 class="page-title">Dashboard Overview</h2>

    <div class="stats-grid">
      <mat-card class="stat-card" *ngFor="let stat of stats">
        <div class="card-content">
          <div class="stat-info">
            <h3>{{ stat.value }}</h3>
            <p>{{ stat.title }}</p>
          </div>
          <mat-icon class="stat-icon">{{ stat.icon }}</mat-icon>
        </div>
      </mat-card>
    </div>

    <div class="charts-grid">

      <mat-card class="chart-card">
        <h3>Test Type Distribution</h3>
        <div class="chart-container">
          <canvas baseChart
                  [data]="doughnutChartData"
                  [type]="doughnutChartType"
                  [options]="doughnutChartOptions">
          </canvas>
        </div>
      </mat-card>

      <mat-card class="chart-card">
        <h3>Monthly Test Trend</h3>
        <div class="chart-container">
          <canvas baseChart
                  [data]="lineChartData"
                  [type]="lineChartType"
                  [options]="lineChartOptions">
          </canvas>
        </div>
      </mat-card>

    </div>

    <div class="full-width-chart">
      <mat-card class="chart-card">
        <h3>Tests per Site</h3>
        <div class="chart-container">
          <canvas baseChart
                  [data]="barChartData"
                  [type]="barChartType"
                  [options]="barChartOptions">
          </canvas>
        </div>
      </mat-card>
    </div>

  </div>
</div>
